<div class="container">
    <div class="container-appDragScroll" appDragScroll>
        <div class="container-appMouseWheelZoom" appMouseWheelZoom>

            <div class="container-scenario-main">
                <div class="container-scenario-main-gamePieces" [style.z-index]="4">
                    <app-game-educationnal-objective [gameEducationnalObjective]="this.scenario.educationnalObjective"></app-game-educationnal-objective>
                    <app-game-context [style.z-index]="2" [gameContext]="this.scenario.context"></app-game-context>
                </div>

                <div class="container-scenario-main-missions">
                    <div class="container-scenario-main-missions-mission" *ngFor="let mission of this.scenario.missions">

                        <div class="container-scenario-chronologie">
                            <div class="container-scenario-chronologie-title">Chronologie générale de la mission</div>
                            <div class="container-scenario-chronologie-steps">
                                <div *ngFor="let step of mission.chronologie, let i = index" [style.z-index]="mission.chronologie.length-i">
                                    <app-step *ngIf="step != null" [step]="step"></app-step>
                                    <div [style.width]="'400px'" *ngIf="step == null"></div>
                                </div>
                            </div>
                        </div>

                        <div class="container-scenario-chronologie">
                            <div class="container-scenario-chronologie-title">Chronologie du rôle</div>
                            <div class="container-scenario-chronologie-steps">
                                <app-step [style.z-index]="2"></app-step>
                                <app-step [style.z-index]="1"></app-step>
                            </div>
                        </div>                        

                        <div style="display: flex;">
                            <div class="container-scenario-main-missions-mission-missionPieces" [style.z-index]="3">
                                <app-educational-objective [educationnalObjective]="mission.educationnalObjective"></app-educational-objective>
                                <app-mission-context [style.z-index]="2" [missionContext]="mission.context"></app-mission-context>
                            </div>

                            <div class="container-scenario-main-missions-mission-roles" [style.z-index]="2">
                                <div class="container-scenario-main-missions-mission-roles-role">
                                    <app-role [style.z-index]="10"></app-role>
                                    <div class="container-scenario-main-missions-mission-roles-role-tasks"
                                        [style.z-index]="1">
                                        <div class="container-scenario-main-missions-mission-roles-role-tasks-inlineTasks"
                                            [style.z-index]="2">
                                            <app-task [style.z-index]="3"></app-task>
                                            <app-task [style.z-index]="2"></app-task>
                                            <app-repeat-task [style.z-index]="1"></app-repeat-task>
                                        </div>
                                        <div class="container-scenario-main-missions-mission-roles-role-tasks-inlineTasks"
                                            [style.z-index]="2">
                                            <app-annexe-task [style.z-index]="3"></app-annexe-task>
                                            <app-optionnal-task [style.z-index]="2"></app-optionnal-task>
                                            <app-final-task [style.z-index]="1"></app-final-task>
                                        </div>
                                        <div class="container-scenario-main-missions-mission-roles-role-tasks-inlineTasks"
                                            [style.z-index]="2">
                                            <app-random-event [style.z-index]="2"></app-random-event>
                                        </div>
                                    </div>
                                </div>
                                <div class="container-scenario-main-missions-mission-roles-role">
                                    <app-role [style.z-index]="10"></app-role>
                                    <div class="container-scenario-main-missions-mission-roles-role-tasks"
                                        [style.z-index]="1">
                                        <div class="container-scenario-main-missions-mission-roles-role-tasks-inlineTasks" [style.z-index]="2">
                                            <app-task [style.z-index]="3"></app-task>
                                            <app-annexe-task [style.z-index]="2"></app-annexe-task>
                                            <app-random-event [style.z-index]="1"></app-random-event>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-sider">
        <app-rules class="container-sider-element"></app-rules>
        <app-role-occurence class="container-sider-element"></app-role-occurence>
        <app-supplementary-task class="container-sider-element"></app-supplementary-task>
        <app-repeat class="container-sider-element"></app-repeat>
        <app-interupt class="container-sider-element"></app-interupt>
        <app-characters class="container-sider-element"></app-characters>
        <app-comments class="container-sider-element"></app-comments>
    </div>

    <div class="container-settings">
        <div class="container-settings-mode">
            <input name="unity" type="checkbox" />
            <label for="unity">Intégrer le jeu sous Unity</label>
        </div>
        <button mat-mini-fab color="white" (click)="downloadFile()"><mat-icon fontIcon="download_file"></mat-icon></button>
        <button mat-mini-fab color="white" (click)="test()"><mat-icon fontIcon="upload-file"></mat-icon></button>
        <input type="file" (change)="onFileSelected($event)">
    </div>
</div>